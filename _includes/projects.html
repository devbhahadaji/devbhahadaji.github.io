<!-- Projects Section -->
<section id="projects" class="projects" itemscope itemtype="https://schema.org/CollectionPage">
  <div class="container">
    <h2 class="section-title animate-on-scroll">Featured Projects</h2>
    <meta itemprop="name" content="Projects by {{ site.name }}">
    <meta itemprop="description" content="Portfolio of web development projects by {{ site.name }}, Full Stack Developer from Jaipur, Rajasthan">

    <!-- Project Filters -->
    <div class="project-filters animate-on-scroll">
      <button class="filter-btn active" data-filter="all">All</button>
      {% assign all_technologies = "" | split: "" %}
      {% for project in site.data.projects %}
      {% for tech in project.technologies %}
      {% assign all_technologies = all_technologies | push: tech %}
      {% endfor %}
      {% endfor %}
      {% assign unique_technologies = all_technologies | uniq | sort %}
      {% for tech in unique_technologies %}
      {% assign clean_tech = tech | downcase | strip | replace: ".", "" | replace: " ", "-" %}
      <button class="filter-btn" data-filter="{{ clean_tech }}">{{ tech | strip }}</button>
      {% endfor %}
    </div>

    <!-- Projects Grid -->
    <div class="projects-grid" itemprop="mainEntity" itemscope itemtype="https://schema.org/ItemList">
      {% for project in site.data.projects %}
      {% assign tech_classes = "" %}
      {% for tech in project.technologies %}
      {% assign tech_classes = tech_classes | append: tech | downcase | replace: ".", "" | replace: " ", "-" %}
      {% unless forloop.last %}{% assign tech_classes = tech_classes | append: " " %}{% endunless %}
      {% endfor %}
      
      {% assign project_page = site.projects | where: "slug", project.slug | first %}

      <article class="project-card animate-on-scroll" data-tech="{{ tech_classes }}" itemprop="itemListElement" itemscope itemtype="https://schema.org/SoftwareApplication">
        <meta itemprop="position" content="{{ forloop.index }}">
        <div class="project-image">
          {% if project.image %}
          <img src="{{ project.image | relative_url }}" alt="{{ project.title }} - Project by {{ site.name }}" loading="lazy" itemprop="image">
          {% else %}
          <div class="project-placeholder">
            <i class="fas fa-code"></i>
            <span>{{ project.title }}</span>
          </div>
          {% endif %}
          <div class="project-overlay">
            <div class="project-links">
              {% if project_page %}
              <a href="{{ project_page.url | relative_url }}" class="project-link" aria-label="View project details for {{ project.title }}">
                <i class="fas fa-info-circle"></i>
              </a>
              {% endif %}
              {% if project.demo_url %}
              <a href="{{ project.demo_url }}" target="_blank" rel="noopener noreferrer" class="project-link" aria-label="View live demo of {{ project.title }}" itemprop="url">
                <i class="fas fa-external-link-alt"></i>
              </a>
              {% endif %}
              {% if project.github_url %}
              <a href="{{ project.github_url }}" target="_blank" rel="noopener noreferrer" class="project-link" aria-label="View source code for {{ project.title }}">
                <i class="fab fa-github"></i>
              </a>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="project-content">
          <h3 class="project-title" itemprop="name">{{ project.title }}</h3>
          <p class="project-description" itemprop="description">{{ project.description }}</p>
          {% if project.technologies %}
          <div class="project-tech">
            {% for tech in project.technologies %}
            <span class="tech-tag" itemprop="applicationCategory">{{ tech }}</span>
            {% endfor %}
          </div>
          {% endif %}
          <div class="project-footer">
            {% if project.status %}
            <span class="status-badge status-{{ project.status | slugify }}">
              {% if project.status == "completed" %}
              <i class="fas fa-check-circle"></i>
              {% elsif project.status == "working on it" %}
              <i class="fas fa-spinner fa-spin"></i>
              {% endif %}
            {{ project.status | capitalize }}
            </span>
            {% endif %}
            {% if project_page %}
            <a href="{{ project_page.url | relative_url }}" class="view-details-link">
              View Details <i class="fas fa-arrow-right"></i>
            </a>
            {% endif %}
          </div>
        </div>
      </article>
      {% endfor %}
    </div>

    <!-- More Projects Link -->
    <div class="text-center" style="margin-top: 3rem;">
      <a href="https://github.com/{{ site.github_username }}" target="_blank" rel="noopener noreferrer"
        class="btn btn-secondary">
        <i class="fab fa-github"></i> View More on GitHub
      </a>
    </div>
  </div>
</section>